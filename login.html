<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Checkout</title>
  <style>
    body { 
      background: #0d0d0d; 
      color: white; 
      font-family: Arial, sans-serif; 
      text-align: center; 
      padding: 40px; 
    }
    h1 { 
      color: #00ffcc; 
      margin-bottom: 20px; 
    }
    .payment-option {
      display: inline-block;
      margin: 20px;
      padding: 20px 30px;
      border-radius: 12px;
      background: linear-gradient(135deg, #00ffcc, #0077ff);
      color: #fff;
      font-weight: bold;
      cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    .payment-option:hover {
      transform: scale(1.05);
      box-shadow: 0 0 20px rgba(0,255,204,0.7);
    }
    #final-price { 
      margin-top: 30px; 
      font-size: 1.5rem; 
      font-weight: bold; 
    }
    a.pay-link {
      display: inline-block;
      margin-top: 10px;
      color: #00ffcc;
      font-weight: bold;
      text-decoration: none;
    }
    a.pay-link:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <h1>Checkout</h1>
  <p id="service-name">Service: ...</p>

  <div>
    <div class="payment-option" onclick="selectPayment('paypal')">Pay with PayPal</div>
    <div class="payment-option" onclick="selectPayment('wise')">Pay with Wise</div>
  </div>

  <div id="final-price">Select a payment method</div>

  <script>
    // Read params from URL
    const params = new URLSearchParams(window.location.search);
    const serviceName = params.get("service");
    const targetHUF = Number(params.get("huf"));

    document.getElementById("service-name").innerText = "Service: " + serviceName;

    // Settings
    const fxRateMid = 390; // FIXED RATE (update manually if needed)
    const paypalFee = 0.034;   // PayPal Hungary: 3.4%
    const paypalFixed = 0.35;  // Fixed fee
    const paypalFxMargin = 0.035; // PayPal’s weaker FX rate (~3.5%)
    const wiseFee = 0.01; // Wise ~1%

    function selectPayment(method) {
      let finalEUR;

      if (method === 'paypal') {
        // Step 1: convert HUF → EUR using PayPal’s weaker FX
        let eurNeeded = targetHUF / (fxRateMid * (1 - paypalFxMargin));

        // Step 2: add PayPal fees
        finalEUR = (eurNeeded + paypalFixed) / (1 - paypalFee);

        document.getElementById("final-price").innerHTML =
          `PayPal Final Price: €${finalEUR.toFixed(2)}<br>
           <a href="https://paypal.me/BoostingTheFinals/${finalEUR.toFixed(2)}" 
              target="_blank" class="pay-link">Pay Now</a>`;
      } 
      else if (method === 'wise') {
        // Step 1: convert HUF → EUR at mid-market
        let eurNeeded = targetHUF / fxRateMid;

        // Step 2: add Wise fee
        finalEUR = eurNeeded * (1 + wiseFee);

        document.getElementById("final-price").innerHTML =
          `Wise Final Price: €${finalEUR.toFixed(2)}<br>
           <a href="https://wise.com/pay/YOURWISE" 
              target="_blank" class="pay-link">Pay Now</a>`;
      }
    }
  </script>
</body>
</html>

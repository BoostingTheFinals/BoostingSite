<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Checkout</title>
  <style>
    body { 
      background: #0d0d0d; 
      color: white; 
      font-family: Arial, sans-serif; 
      text-align: center; 
      padding: 40px; 
    }
    h1 { 
      color: #00ffcc; 
      margin-bottom: 20px; 
    }
    .payment-option {
      display: inline-block;
      margin: 20px;
      padding: 20px 30px;
      border-radius: 12px;
      background: linear-gradient(135deg, #00ffcc, #0077ff);
      color: #fff;
      font-weight: bold;
      cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    .payment-option:hover {
      transform: scale(1.05);
      box-shadow: 0 0 20px rgba(0,255,204,0.7);
    }
    #final-price { 
      margin-top: 30px; 
      font-size: 1.5rem; 
      font-weight: bold; 
    }
    a.pay-link {
      display: inline-block;
      margin-top: 10px;
      color: #00ffcc;
      font-weight: bold;
      text-decoration: none;
    }
    a.pay-link:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <h1>Checkout</h1>
  <p id="service-name">Service: ...</p>

  <div>
    <div class="payment-option" onclick="selectPayment('binance')">Pay with Binance</div>
    <div class="payment-option" onclick="selectPayment('wise')">Pay with Wise</div>
  </div>

  <div id="final-price">Select a payment method</div>

  <script>
    // Read params from URL
    const params = new URLSearchParams(window.location.search);
    const serviceName = params.get("service");
    const targetHUF = Number(params.get("huf"));

    document.getElementById("service-name").innerText = "Service: " + serviceName;

    // Settings
    const fxRateMid = 390; // FIXED RATE (update manually if needed)
    const wiseFee = 0.01; // Wise ~1%

    function selectPayment(method) {
      let finalEUR;

      if (method === 'binance') {
        // Binance: straight conversion HUF → EUR (no fee added here)
        finalEUR = targetHUF / fxRateMid;

        document.getElementById("final-price").innerHTML =
          `Binance Final Price: €${finalEUR.toFixed(2)}<br>
           <a href="https://www.binance.com/" target="_blank" class="pay-link">Pay with Binance</a><br>
           <small style="color:#ccc;">⚠️ Please send the exact amount in EUR via Binance Pay.</small>`;
      } 
      else if (method === 'wise') {
        // Wise: HUF → EUR at mid-market + ~1% fee
        let eurNeeded = targetHUF / fxRateMid;
        finalEUR = eurNeeded * (1 + wiseFee);

        document.getElementById("final-price").innerHTML =
          `Wise Final Price: €${finalEUR.toFixed(2)}<br>
           <a href="https://wise.com/pay/me/zetenyz?amount=${finalEUR.toFixed(2)}&currency=EUR" 
              target="_blank" class="pay-link">Pay with Wise</a><br>
           <small style="color:#ccc;">⚠️ Please don’t change the amount in Wise.</small>`;
      }
    }
  </script>
</body>
</html>
